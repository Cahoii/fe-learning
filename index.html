<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Ôn Tập Trắc Nghiệm - CSD203</title>
  </head>
  <body>
    <div class="app-container">
      <!-- Selection Screen -->
      <div id="selectionScreen" class="screen active">
        <div class="header">
          <h1>Ôn Tập Trắc Nghiệm</h1>
          <p>Chọn môn học và số lượng câu hỏi để bắt đầu</p>
        </div>

        <div class="form-section">
          <h2>Thiết lập bài thi</h2>
          <div class="form-group">
            <label for="subjectSelect">Chọn môn học:</label>
            <select id="subjectSelect" class="form-control">
              <option value="CSD203">
                CSD203 - Data Structures and Algorithms
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="questionCount">Số lượng câu hỏi (1-175):</label>
            <input
              type="number"
              id="questionCount"
              class="form-control"
              min="1"
              max="175"
              value="10"
            />
            <div
              id="questionError"
              class="error-text"
              style="display: none"
            ></div>
          </div>
          <button id="startBtn" class="btn btn--primary">Bắt đầu thi</button>
        </div>

        <div class="form-section">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: var(--space-16);
            "
          >
            <h2 style="margin-bottom: 0">Lịch sử thi</h2>
            <button
              id="clearHistoryBtn"
              class="btn btn--danger"
              style="
                padding: var(--space-8) var(--space-16);
                font-size: var(--font-size-sm);
              "
            >
              Xóa lịch sử
            </button>
          </div>
          <div id="historyContainer">
            <div class="empty-state">Chưa có lịch sử thi</div>
          </div>
        </div>
      </div>

      <!-- Quiz Screen -->
      <div id="quizScreen" class="screen">
        <div class="quiz-header">
          <h1 class="quiz-title" id="quizTitle">CSD203</h1>
          <div class="quiz-progress" id="quizProgress">Câu 1/10</div>
          <div class="quiz-timer" id="quizTimer">⏱ 0:00</div>
        </div>

        <div class="question-container">
          <div class="question-image" id="questionImage">Question1.png</div>
          <div class="answers-grid" id="answersGrid">
            <button class="answer-btn" data-answer="A">A</button>
            <button class="answer-btn" data-answer="B">B</button>
            <button class="answer-btn" data-answer="C">C</button>
            <button class="answer-btn" data-answer="D">D</button>
          </div>
        </div>

        <div class="quiz-controls">
          <button id="backToSelectionBtn" class="btn btn--secondary">
            Quay lại
          </button>
          <button id="nextBtn" class="btn btn--primary">Tiếp theo</button>
        </div>
      </div>

      <!-- Result Screen -->
      <div id="resultScreen" class="screen">
        <div class="header">
          <h1>Kết quả thi</h1>
        </div>

        <div class="result-summary">
          <div class="result-score" id="resultScore">0</div>
          <div class="result-stats">
            <div class="stat-item">
              <div class="stat-label">Số câu đúng</div>
              <div class="stat-value" id="correctCount">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Số câu sai</div>
              <div class="stat-value" id="wrongCount">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Câu bỏ trống</div>
              <div class="stat-value" id="emptyCount">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Tỉ lệ đúng</div>
              <div class="stat-value" id="percentageScore">0%</div>
            </div>
          </div>
        </div>

        <div class="result-details">
          <h2>Chi tiết từng câu</h2>
          <table class="result-table" id="resultTable">
            <thead>
              <tr>
                <th>Câu</th>
                <th>Ảnh</th>
                <th>Đáp án đúng</th>
                <th>Đáp án của bạn</th>
                <th>Trạng thái</th>
              </tr>
            </thead>
            <tbody id="resultTableBody"></tbody>
          </table>
        </div>

        <button id="backToHomeBtn" class="btn btn--primary">Quay lại</button>
      </div>

      <!-- Image preview modal -->
      <div id="imageModal" class="image-modal" aria-hidden="true">
        <div class="image-modal__backdrop" id="imageModalBackdrop"></div>
        <div class="image-modal__content" role="dialog" aria-modal="true">
          <button
            id="imageModalClose"
            class="image-modal__close"
            aria-label="Đóng"
          >
            ×
          </button>
          <img id="imageModalImg" src="" alt="Preview" />
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
